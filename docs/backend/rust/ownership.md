# 所有权

Rust 无需垃圾回收即可保障内存安全

## 前言

所有程序必须管理计算机内存

- 具有 `垃圾回收机制` 的语言 `在运行中不断寻找不再使用的内存`
- 程序员亲自 `分配和释放` 内存
- 通过 `所有权系统` 管理内存


## 所有权规则

- 每一个值都有一个对应的变量作为它的所有者
- 在同一时间内，值有且仅有一个所有者
- 当所有者离开自己的作用域时，它持有的值就会被释放掉 

## 变量与数据交互方式

- 移动

```rust
let s1 = String::from("hello");
let s2 = s1;
```

- 克隆

```rust
let s1 = String::from("hello");
let s2 = s1.clone();
```

:::tip Copy trait
如果一个类型实现了 `Copy trait`,那么一个旧的变量在其赋值给其他变量后仍然可用
eg:
- 整数类型 u32...
- 布尔类型 true...
- 浮点类型 f64...
- 字符类型 char
- 元祖，当且仅当其包含的类型也都实现 `Copy` 时候
:::

## 所有权与函数

**向函数传递值可能会移动或者复制**


## 引用（references） 借用 (borrowing)

不用获取所有权就可以使用值的功能

创建以一个引用的行为称为借用

- 符号 `&` `允许你使用值但不获取其所有权`
-