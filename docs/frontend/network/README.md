# 前言

故事一定要从 `点击浏览器之后发生了什么` 开始说起


:::tip 参考资料
[浏览器输入URL之后发生了什么](https://zhuanlan.zhihu.com/p/43369093)

[当···时发生了什么？[github]](https://github.com/skyline75489/what-happens-when-zh_CN)
:::

## DNS

浏览向`本地DNS服务器`发起请求，若本地DNS没有缓存则不能直接将域名转换为IP，需要依次向`根域名服务器`、`顶级域名服务器`、`权威域名服务器`发起查询请求。

## HTTP请求

拿到`IP地址`之后，浏览器通过系统调用Socket接口与服务器特定端口进行通信。

- 建立连接
- 发送HTTP请求

HTTP请求头不区分大小写，基于 `ASCII` 进行编码；实体可以基于其他编码方式，由 `Content-Type` 决定

- 返回HTTP响应

浏览器和服务器必须保证HTTP的传输顺序，各自维护的队列中请求/响应顺序必须一一对应。否则会出现乱序而出错。

- 维持连接

完成HTTP请求之后，服务器并不是马上断开与客户端的连接。`HTTP1.1` 默认开启 `Connection: keep-alive`

- 释放连接

## 浏览器解析

浏览器自上而下逐行解析`HTML`，遇到外链 `CSS`，主线程调用网络请求模块异步获取资源

- 主流程

- 渲染流程

- 页面生命周期